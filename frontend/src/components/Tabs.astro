---
const { activeTab = 0 } = Astro.props;
---

<div class="tabs">
    <div class="tabs-header" role="tablist">
        <slot name="tab" />
    </div>
    <div class="tabs-content">
        <slot name="panel" />
    </div>
</div>

<style>
    .tabs {
        width: 100%;
        margin-top: 2rem;
    }

    .tabs-header {
        display: flex;
        gap: 1rem;
        border-bottom: 2px solid var(--border-color);
        margin-bottom: 2rem;
        justify-content: center;
        padding: 0 1rem;
    }

    .tabs-header :global([role="tab"]) {
        padding: 0.75rem 1.5rem;
        border: none;
        background: none;
        color: var(--text-color);
        cursor: pointer;
        border-bottom: 2px solid transparent;
        margin-bottom: -2px;
        transition: all 0.2s ease;
    }

    .tabs-header :global([role="tab"][aria-selected="true"]) {
        border-bottom-color: var(--accent-color);
        color: var(--accent-color);
    }

    .tabs-header :global([role="tab"]:hover) {
        color: var(--accent-color);
    }

    .tabs-content {
        padding: 1rem 0;
    }

    .tabs-content :global([role="tabpanel"]) {
        animation: fadeIn 0.3s ease;
    }

    @keyframes fadeIn {
        from {
            opacity: 0;
            transform: translateY(10px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
</style>

<script>
    const tabList = document.querySelector('[role="tablist"]');
    const tabs = tabList?.querySelectorAll('[role="tab"]');
    const panels = document.querySelectorAll('[role="tabpanel"]');

    // Hide all panels except the first one
    panels.forEach((panel, index) => {
        if (index !== 0) panel.hidden = true;
    });

    // Add click handlers to tabs
    tabs?.forEach((tab) => {
        tab.addEventListener('click', (e) => {
            const target = e.target as HTMLElement;
            const panelId = target.getAttribute('aria-controls');
            const panel = document.getElementById(panelId!);

            // Hide all panels
            panels.forEach(panel => panel.hidden = true);
            
            // Show the selected panel
            panel!.hidden = false;

            // Set the clicked tab as selected
            tabs.forEach(tab => {
                tab.setAttribute('aria-selected', 'false');
                tab.classList.remove('selected');
            });
            target.setAttribute('aria-selected', 'true');
            target.classList.add('selected');
        });
    });
</script> 